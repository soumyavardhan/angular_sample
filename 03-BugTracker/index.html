<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bug Tracker</title>
    <script>
    /*
    1. List the bugs
    2. Add a new bug
    3. Toggle the closed status of the bug
    4. Remove closed bugs
    5. Display statistics
    6. Search for bugs
    7. Sort the bugs
    8. Improvise the bug display (name)
    9. Display the created time stamp of the bug
    10. Persist the bugs in the server
    */
    </script>
    <style>
        .stats{
            font-weight: bold;
            font-size: 12pt;
        }
        .closed {
            color : red;
            text-decoration: line-through;
            font-style: italic;
        }
        div {
            margin-bottom: 10px;
        }
    </style>
    <script src="angular.js"></script>
    <script>
        var bugTrackerApp = angular.module("bugTrackerApp", []);

        bugTrackerApp.controller("bugsController", function($scope){
            $scope.bugs = [
                {name: "Server Communication Failure", isClosed: false},
                {name: "Stack Overflow Error", isClosed: false},
                {name: "Object Reference Not Found", isClosed: false},
                {name: "User Authentication Failure", isClosed: false}
            ];

            $scope.newBugName = "";

            $scope.addbug = function(){
                $scope.bugs.push({name: $scope.newBugName, isClosed: false});
            };

            $scope.toggle = function(bug){
                bug.isClosed = !bug.isClosed;
            };

            $scope.setSelectedBug = function(bug){
                $scope.selectedBug = bug;
            };

            $scope.removeClosedBugs = function(){
                for (var i=$scope.bugs.length-1; i>=0; i--) {
                    var bug = $scope.bugs[i];
                    if(bug.isClosed==true) {
                        $scope.bugs.splice(i, 1);
                    }
                }
            };

            $scope.getClosedCount = function() {
                return $scope.bugs.filter(function(bug){
                    return bug.isClosed;
                }).length;
            }
        });

    </script>
</head>
<body ng-app="bugTrackerApp"><!--angular starts compilation from here-->
<h1>Bug Tracker</h1>
<div class="content" ng-controller="bugsController">
    <div class="stats">
        <span class="closed">{{getClosedCount()}}</span>
        /
        <span>{{bugs.length}}</span>
    </div>
    <div class="search">
        <label for="">Search :</label>
        <input type="text" name="" id="">
    </div>
    <div class="order">
        <label for="">Sort :</label>
        <input type="text" name="" id="">
    </div>
    <div class="list">
        <label for="">Bug :</label>
        <input type="text" name="" id="" ng-model="newBugName">
        <input type="button" value="Add Bug" ng-click="addbug()">
        <input type="button" value="Remove Closed" ng-click="removeClosedBugs()">
        <ol>
            <li ng-repeat="bug in bugs" ng-click="toggle(bug)" ng-class="{closed: bug.isClosed}">
                {{bug}}
                <input type="button" value="select" ng-click="setSelectedBug(bug)">
            </li>
        </ol>
        <br/><br/>
        <div>The selected bug is {{selectedBug}}</div>
    </div>
</div>
</body>
</html>
